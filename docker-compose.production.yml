version: '2.3'
services:
  web:
    volumes: 
     - /z:/z
    restart: always
    external_links:
      - sentry-server:sentry
    environment: 
      WORKER_CONNECTIONS: 10240
      SENTRY_DSN: ${SENTRY_DSN}
  socketio:
    restart: always
    environment: 
      SENTRY_DSN: ${SENTRY_DSN}
    external_links:
      - sentry-server:sentry
  worker:
    restart: always
  watch:
    volumes: 
     - /z:/z
    restart: always
    external_links:
      - sentry-server:sentry
    environment: 
      SENTRY_DSN: ${SENTRY_DSN}
  generation:
    volumes: 
     - /z:/z
    restart: always
    external_links:
      - sentry-server:sentry
    environment: 
      SENTRY_DSN: ${SENTRY_DSN}
  nginx:
    restart: always
    ports:
     - "60000:80"
     - "60001:443"