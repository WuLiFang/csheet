version: '3.5'
services:
  web:
    image: 'csheet'
    ports:
     - "80:80"
    volumes: 
     - ${CSHEET_STORAGE:-'/srv/csheet'}:/srv/csheet
     - database:/var/db
    environment: 
      NUM_WORKERS: ${NUM_WORKERS:-'4'}
  watch:
    image: 'csheet'
    command: 'run watch'
    volumes: 
     - ${CSHEET_STORAGE:-'/srv/csheet'}:/srv/csheet
     - database:/var/db
  generation:
    image: 'csheet'
    command: 'run generation'
    volumes: 
     - ${CSHEET_STORAGE:-'/srv/csheet'}:/srv/csheet
     - database:/var/db

volumes:
    database: